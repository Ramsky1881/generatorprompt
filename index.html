<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Prompt untuk ComfyUI dengan Gemini</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #2d3748; }
        ::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #718096; }
        .form-checkbox:checked {
            background-color: #4f46e5;
            border-color: #4f46e5;
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-left-color: #4f46e5;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 antialiased">

    <!-- Main Container -->
    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white">Generator Prompt By Ramsky</h1>
            <p class="text-gray-400 mt-2">Sempurnakan ide Anda dari Bahasa Indonesia ke prompt Bahasa Inggris dengan sekali klik.</p>
        </header>

        <!-- Form Section -->
        <div class="bg-gray-800 p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700">
            <form id="prompt-form" class="space-y-8">
                
                <!-- Positive Prompts Section -->
                <div class="space-y-6">
                    <h2 class="text-xl font-semibold text-white border-b border-gray-600 pb-2">Prompt Positif</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="indonesian-subject" class="block text-sm font-medium text-gray-300 mb-2">Subjek Utama (Bahasa Indonesia)</label>
                            <input type="text" id="indonesian-subject" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="Cth: ksatria wanita agung" value="ksatria wanita agung">
                        </div>
                        <div>
                            <label for="art-style" class="block text-sm font-medium text-gray-300 mb-2">Gaya Seni</label>
                            <select id="art-style" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                                <option value="photorealistic, realistic, photograph, ultra realistic">Realistis / Fotografi</option>
                                <option value="concept art, digital art">Seni Konsep, Seni Digital</option>
                                <option value="digital painting, fantasy art">Lukisan Digital, Seni Fantasi</option>
                                <option value="epic fantasy, oil painting style">Fantasi Epik, Gaya Lukisan Cat Minyak</option>
                                <option value="anime style, key visual, beautiful detailed eyes">Gaya Anime, Visual Kunci</option>
                                <option value="cyberpunk, neon noir, futuristic">Cyberpunk, Neon Noir</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label for="indonesian-details" class="block text-sm font-medium text-gray-300 mb-2">Deskripsi Tambahan (Bahasa Indonesia)</label>
                            <textarea id="indonesian-details" rows="4" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="Jelaskan detail armor, rambut, lingkungan, dll.">Armornya terbuat dari obsidian dengan ukiran emas menyala seperti lava. Rambutnya hitam legam. Dia memegang busur dari kayu suci. Dia berdiri di hutan ajaib saat malam, dikelilingi pohon raksasa dan jamur yang berpendar biru dan ungu.</textarea>
                        </div>
                        <div>
                            <label for="lighting-select" class="block text-sm font-medium text-gray-300 mb-2">Pencahayaan</label>
                            <select id="lighting-select" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                                <option value="cinematic lighting, rembrandt lighting">Pencahayaan Sinematik, Rembrandt</option>
                                <option value="dramatic lighting, volumetric lighting">Pencahayaan Dramatis, Volumetrik</option>
                                <option value="soft light, magical ambient glow">Cahaya Lembut, Cahaya Ambien Ajaib</option>
                                <option value="golden hour, beautiful light">Golden Hour, Cahaya Indah</option>
                                <option value="bioluminescent glow, neon lighting">Cahaya Bioluminesens, Neon</option>
                            </select>
                        </div>
                        <div>
                            <label for="camera-select" class="block text-sm font-medium text-gray-300 mb-2">Sudut Kamera & Komposisi</label>
                             <select id="camera-select" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                                <option value="full body shot, low angle">Foto Seluruh Badan, Sudut Rendah</option>
                                <option value="epic wide shot, rule of thirds">Pemandangan Luas & Epik</option>
                                <option value="dramatic close-up portrait">Potret Close-up Dramatis</option>
                                <option value="dynamic action shot">Pose Aksi Dinamis</option>
                                <option value="medium shot">Jarak Menengah</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Negative Prompts Section -->
                <div class="space-y-4">
                     <h2 class="text-xl font-semibold text-white border-b border-gray-600 pb-2">Prompt Negatif</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="deformed, distorted, disfigured" checked><span>Cacat</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="ugly, disgusting" checked><span>Jelek</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="blurry, out of focus" checked><span>Buram</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="bad anatomy, extra limbs, bad hands" checked><span>Anatomi Buruk</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="low resolution, pixelated, jpeg artifacts" checked><span>Resolusi Rendah</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="watermark, text, signature, username" checked><span>Teks / Watermark</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="anime, manga, cartoon" checked><span>Gaya Anime</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="3d, cgi, render" checked><span>Gaya 3D / CGI</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="drawing, painting, illustration"><span>Lukisan / Ilustrasi</span></label>
                        <label class="flex items-center space-x-2 bg-gray-700 p-3 rounded-lg cursor-pointer hover:bg-gray-600"><input type="checkbox" class="form-checkbox" value="childish, simple"><span>Kekanakan</span></label>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center pt-4">
                    <button type="submit" id="submit-button" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-12 rounded-lg shadow-lg transition-transform transform hover:scale-105 flex items-center justify-center mx-auto">
                        <span id="button-text">Buat Prompt</span>
                        <div id="loading-spinner" class="spinner hidden ml-3"></div>
                    </button>
                     <p id="error-message" class="text-red-400 text-sm mt-4 h-4"></p>
                </div>
            </form>
        </div>

        <!-- Result Section -->
        <div id="result-section" class="mt-10 hidden">
            <h2 class="text-2xl font-bold text-center mb-6 text-white">Hasil Prompt untuk ComfyUI</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Positive Prompt Output -->
                <div>
                    <h3 class="font-semibold text-lg mb-3 text-white">Positive Prompt</h3>
                    <div class="relative bg-gray-800 p-2 rounded-xl border border-gray-700">
                        <textarea id="positive-prompt" class="w-full h-48 bg-gray-800 text-gray-200 rounded-lg p-3 border-none focus:ring-2 focus:ring-indigo-500"></textarea>
                        <button type="button" class="copy-btn absolute top-4 right-4 bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-2 rounded-md transition-colors" data-target="positive-prompt">Salin</button>
                    </div>
                </div>
                <!-- Negative Prompt Output -->
                <div>
                    <h3 class="font-semibold text-lg mb-3 text-white">Negative Prompt</h3>
                    <div class="relative bg-gray-800 p-2 rounded-xl border border-gray-700">
                        <textarea id="negative-prompt" class="w-full h-48 bg-gray-800 text-gray-200 rounded-lg p-3 border-none focus:ring-2 focus:ring-indigo-500"></textarea>
                        <button type="button" class="copy-btn absolute top-4 right-4 bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-2 rounded-md transition-colors" data-target="negative-prompt">Salin</button>
                    </div>
                </div>
            </div>
            <p id="copy-feedback" class="text-center text-sm text-green-400 mt-4 h-4"></p>
        </div>
    </div>

    <script>
        const form = document.getElementById('prompt-form');
        const submitButton = document.getElementById('submit-button');
        const buttonText = document.getElementById('button-text');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');
        
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            errorMessage.textContent = '';
            
            const apiKey = 'AIzaSyCeC4RzS5_GETZO0Ql8tJehZtV-rREnrpI';

            buttonText.textContent = 'Memproses...';
            loadingSpinner.classList.remove('hidden');
            submitButton.disabled = true;

            // Gather all inputs
            const indonesianSubject = document.getElementById('indonesian-subject').value.trim();
            const indonesianDetails = document.getElementById('indonesian-details').value.trim();
            const artStyle = document.getElementById('art-style').value;
            const lighting = document.getElementById('lighting-select').value;
            const cameraAngle = document.getElementById('camera-select').value;

            let completePositivePrompt = '';

            try {
                // Construct a more comprehensive prompt for Gemini
                const systemPrompt = `You are a world-class prompt engineer for the ComfyUI AI image generator. Your task is to craft a single, cohesive, and powerful positive prompt in English. 
                
Combine the following user inputs into one, single, comma-separated string of keywords. Your main job is to take the user's Indonesian descriptions and enhance them with more vivid, evocative, and detailed English keywords. The final output must be a single block of text containing all elements seamlessly integrated.

User Inputs:
- Main Subject (in Indonesian): "${indonesianSubject}"
- Additional Details & Environment (in Indonesian): "${indonesianDetails}"
- Art Style Keywords: "${artStyle}"
- Lighting Style Keywords: "${lighting}"
- Camera & Composition Keywords: "${cameraAngle}"

Combine all of these into a master prompt. Start with quality keywords like 'masterpiece, best quality', integrate the enhanced subject and details, and end with technical keywords like '8k, sharp focus, intricate details, cinematic'. Do not use full sentences. Only output the final, single, comma-separated English prompt string.`;

                const payload = {
                    contents: [{ parts: [{ text: systemPrompt }] }]
                };

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || `HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                completePositivePrompt = data.candidates[0].content.parts[0].text.trim();

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                errorMessage.textContent = `Gagal menghubungi API Gemini: ${error.message}`;
                buttonText.textContent = 'Buat Prompt';
                loadingSpinner.classList.add('hidden');
                submitButton.disabled = false;
                return;
            }
            
            // --- Construct Negative Prompt ---
            const negativeKeywords = ['(worst quality, low quality:1.4)'];
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                negativeKeywords.push(checkbox.value);
            });
            const negativePrompt = negativeKeywords.join(', ');

            // --- Display results ---
            const resultSection = document.getElementById('result-section');
            document.getElementById('positive-prompt').value = completePositivePrompt; // Use the complete prompt from Gemini
            document.getElementById('negative-prompt').value = negativePrompt;
            resultSection.classList.remove('hidden');
            
            buttonText.textContent = 'Buat Prompt';
            loadingSpinner.classList.add('hidden');
            submitButton.disabled = false;
            
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // --- Copy button functionality ---
        const copyFeedback = document.getElementById('copy-feedback');
        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', function() {
                const targetId = this.dataset.target;
                const textToCopy = document.getElementById(targetId).value;

                navigator.clipboard.writeText(textToCopy).then(() => {
                    copyFeedback.textContent = `Prompt ${targetId.includes('positive') ? 'Positif' : 'Negatif'} berhasil disalin!`;
                    setTimeout(() => { copyFeedback.textContent = ''; }, 3000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    copyFeedback.textContent = 'Gagal menyalin.';
                });
            });
        });
    </script>
</body>
</html>
